<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Eco-Friendly Products Marketplace{% endblock %}</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'styles.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
<header>
    <div class="header-content">
        <div id="logo">
            <img src="{% static 'images/logo3.png' %}" alt="Logo" width="60" height="72">
        </div>
        <div id="center-text">
            Eco Finds
        </div>
        <div class="user-info">
            {% if user.is_authenticated %}
                <span class="welcome-text"> {{ user.username }}</span>
                <div class="profile-picture">
                    {% if user.userregistration.profile_picture %}
                        <img src="{{ user.userregistration.profile_picture.url }}" alt="Profile Picture" width="50" height="50">
                    {% else %}
                        <img src="{% static 'images/default_profile_picture.png' %}" alt="Default Profile Picture" width="50" height="50">
                    {% endif %}
                </div>
            {% endif %}
            <div class="icons">
                <div class="dropdown">
                    <span class="material-symbols-outlined user-icon"><i class="fas fa-user fa-2x"></i></span>
                    <div class="dropdown-content">
                        {% if user.is_authenticated %}
                            <a href="{% url 'profile' %}">Profile</a>
                            <a href="{% url 'logout' %}">Logout</a>
                        {% else %}
                            <a href="{% url 'login' %}">Login</a>
                            <a href="{% url 'register' %}">Register</a>
                        {% endif %}
                        <a href="#" onclick="openWishlist()">Wishlist</a>
                        <a href="{% url 'view_cart' %}">Cart</a>
                    </div>
                </div>
                {% if user.is_authenticated %}
                    <span class="material-symbols-outlined" id="wishlist-icon" onclick="openWishlist()"><i class="fas fa-heart fa-2x"></i></span>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="wrapper">
        <div class="searchBar">
            <input id="searchQueryInput" type="text" name="searchQueryInput" placeholder="What are you looking for?" value="" />
            <button id="searchQuerySubmit" type="submit" name="searchQuerySubmit">Search</button>
        </div>
    </div>

    <nav>
        <ul class="navigation-menu">
            <li><a href="{% url 'home' %}">Home</a></li>
            <li><a href="{% url 'product_showcase' %}">Products</a></li>
            <li><a href="{% url 'rewards' %}"><i class="rewards"></i> Rewards </a></li>
            <li><a href="{% url 'aboutus' %}">About Us</a></li>
            <li><a href="{% url 'order_history' %}">Order History</a></li>
        </ul>
    </nav>
</header>


<main>
    {% block content %}
    {% endblock %}
</main>

<section id="summer-collection">
    <div class="container">
        <div class="sc-content">
            <h1>summer collection</h1>
            <p class="description">Step into the vibrant world of our Summer Collection, where sunshine and style meet. Explore a dazzling array of dresses that capture the essence of summer with their breezy fabrics and vibrant colors. Pamper yourself with our specially curated cosmetics, designed to keep you glowing even on the hottest days. Delight in our adorable kids' summer essentials, perfect for keeping the little ones cool and stylish. From chic accessories to must-have seasonal items, our Summer Collection is your one-stop destination for everything you need to make this summer unforgettable. Embrace the season with flair and let our collection inspire your summer adventures!</p>
            <a href="{% url 'products' %}?category=Summer_Collection">discover now</a>
        </div>
        <div class="sc-media">
            <div class="sc-media-bg">
                <img src="{% static 'images/slide3.jpg' %}" alt="sc-image" />
            </div>
        </div>
    </div>
</section>


<section id="products">
    <div class="container">
        <div class="products-header">
            <h2>Popular Products</h2>
            <p>Discover our carefully curated collection of popular products, designed to promote sustainability and a greener lifestyle.</p>
        </div>
        <div class="product product-1">
            <figure>
                <img src="{{ home_essentials.2.image.url }}" alt="product-image">
                <figcaption>{{ home_essentials.2.name }}</figcaption>
                <figcaption>$ {{ home_essentials.2.price }}</figcaption>
                <button class="wishlist-button" onclick="addToWishlist('{{ home_essentials.2.id }}')"><i class="fas fa-heart"></i></button>
            </figure>
        </div>
        <div class="product product-2">
            <figure>
                <img src="{{ kids_section.4.image.url }}" alt="product-image">
                <figcaption>{{ kids_section.4.name }}</figcaption>
                <figcaption>$ {{ kids_section.4.price }}</figcaption>
                <button class="wishlist-button" onclick="addToWishlist('{{ kids_section.4.id }}')"><i class="fas fa-heart"></i></button>
            </figure>
        </div>
        <div class="product product-3">
            <figure>
                <img src="{{ recycled_products.3.image.url }}" alt="product-image">
                <figcaption>{{ recycled_products.3.name }}</figcaption>
                <figcaption>$ {{ recycled_products.3.price }}</figcaption>
                <button class="wishlist-button" onclick="addToWishlist('{{ recycled_products.3.id }}')"><i class="fas fa-heart"></i></button>
            </figure>
        </div>
        <div class="product product-4">
            <figure>
                <img src="{{ women_clothing.1.image.url }}" alt="product-image">
                <figcaption>{{ women_clothing.1.name }}</figcaption>
                <figcaption>$ {{ women_clothing.1.price }}</figcaption>
                <button class="wishlist-button" onclick="addToWishlist('{{ women_clothing.1.id }}')"><i class="fas fa-heart"></i></button>
            </figure>
        </div>
    </div>
</section>

<section id="collections">
    <div class="container">
        <div class="c-1">
            <div class="c-1-image-holder">
                <img src="{{ bamboo_products.0.image.url }}" alt="image">
                <p class="product-name">{{ bamboo_products.0.name }}</p>
                <button class="wishlist-button" onclick="addToWishlist('{{ bamboo_products.0.id }}')"><i class="fas fa-heart"></i></button>
            </div>
        </div>
        <div class="c-2">
            <h2>Featured Bamboo Collections</h2>
            <hr />
            <div class="c-2-image-holder">
                {% for product in bamboo_products|slice:":4" %}
                <div class="image-wrapper">
                    <img src="{{ product.image.url }}" alt="{{ product.name }}">
                    <p class="product-name">{{ product.name }}</p>
                    <button class="wishlist-button" onclick="addToWishlist('{{ product.id }}')"><i class="fas fa-heart"></i></button>
                </div>
                {% endfor %}
            </div>
            <p class="button"><a href="{% url 'products' %}?category=Bamboo_Products" class="view-all-collections-link">view all collections</a></p>
        </div>
    </div>
</section>

<section id="blog">
    <div class="container">
        <div class="blog-header">
            <h2> Recycled Products </h2>
            <p>
                Products made from recycled materials are crafted with sustainability in mind,
                giving new life to discarded items.
            </p>
        </div>
        <div class="blog-content">
            <div class="blog-1">
                <div class="blog-1-image-holder">
                    <img src="{{recycled_products.6.image.url }}" alt="image">
                </div>
                <div class="blog-1-content">
                    <h4>{{recycled_products.6.name }}</h4>
                    <h3>$ {{recycled_products.6.price }}</h3>
                    <p class="description">
                        {{recycled_products.6.environmental_impact }}<br><br>
                        <b> Carbon Emission - {{recycled_products.6.carbon_emission }} %</b>
                    </p>
                    <button class="wishlist-button" onclick="addToWishlist('{{ recycled_products.6.id }}')"><i class="fas fa-heart"></i></button>
                </div>
            </div>
            <div class="blog-2">
                <div class="blog-2-image-holder">
                    <img src="{{recycled_products.5.image.url }}" alt="image">
                </div>
                <div class="blog-2-content">
                    <h4>{{recycled_products.5.name }}</h4>
                    <h3>$ {{recycled_products.5.price }}</h3>
                    <p class="description">
                        {{recycled_products.5.environmental_impact }}<br><br>
                        <b> Carbon Emission - {{recycled_products.5.carbon_emission }} %</b>
                    </p>
                    <button class="wishlist-button" onclick="addToWishlist('{{ recycled_products.5.id }}')"><i class="fas fa-heart"></i></button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- New Carbon Footprint Statistics Section -->
<section id="carbon-footprint">
    <div class="container">
        <div class="stats-header">
            <h2>  Reduction of Carbon Emission </h2>
            <p>Understanding the impact of eco-friendly products through different stages over the years.</p>
        </div>
        <div class="stats-content">
            <div class="stat-item" data-stat="80">
                <div class="circle">
                    <div class="circle-content">1950</div>
                </div>
                <div class="percentage">80%</div>
                <div class="progress-bar">
                    <div class="progress"></div>
                </div>
                <div class="description">
                    <h3>1950</h3>
                    <p>In 1950, industrialization led to significant carbon emissions. Most products were made with little consideration for the environment, leading to high carbon footprints.</p>
                </div>
            </div>
            <div class="stat-item" data-stat="70">
                <div class="circle">
                    <div class="circle-content">1990</div>
                </div>
                <div class="percentage">70%</div>
                <div class="progress-bar">
                    <div class="progress"></div>
                </div>
                <div class="description">
                    <h3>1990</h3>
                    <p>By 1990, awareness of environmental issues began to grow. Some companies started reducing emissions, but the impact of eco-friendly products was still minimal.</p>
                </div>
            </div>
            <div class="stat-item" data-stat="50">
                <div class="circle">
                    <div class="circle-content">2000</div>
                </div>
                <div class="percentage">50%</div>
                <div class="progress-bar">
                    <div class="progress"></div>
                </div>
                <div class="description">
                    <h3>2000</h3>
                    <p>The turn of the millennium saw more widespread adoption of eco-friendly practices. Products began to incorporate sustainable materials, reducing carbon emissions by half.</p>
                </div>
            </div>
            <div class="stat-item" data-stat="30">
                <div class="circle">
                    <div class="circle-content">2020</div>
                </div>
                <div class="percentage">30%</div>
                <div class="progress-bar">
                    <div class="progress"></div>
                </div>
                <div class="description">
                    <h3>2020</h3>
                    <p>In 2020, eco-friendly products have significantly reduced carbon footprints. Advanced technologies and increased awareness have led to a 70% reduction in emissions compared to 1950.</p>
                </div>
            </div>
        </div>
    </div>
</section>


<div id="wishlistModal" class="modal-wishlist">
    <div class="modal-content-wishlist">
        <span class="close-wishlist" onclick="closeWishlist()">&times;</span>
        <div class="wishlist-container" id="wishlist-container">
            <!-- Wishlist items will be dynamically inserted here -->
        </div>
    </div>
</div>



<footer>
  <div class="fo-container">
    <div class="fo-row fo-text-center">
      <div class="fo-col-md-4 fo-footer-column">
        <ul class="fo-nav fo-flex-column">
          <li class="fo-nav-item">
            <span class="fo-footer-title">Product</span>
          </li>
          <li class="fo-nav-item">
            <a class="fo-nav-link" href="#">Product 1</a>
          </li>
          <li class="fo-nav-item">
            <a class="fo-nav-link" href="#">Product 2</a>
          </li>
          <li class="fo-nav-item">
            <a class="fo-nav-link" href="#">Plans & Prices</a>
          </li>
          <li class="fo-nav-item">
            <a class="fo-nav-link" href="#">Frequently asked questions</a>
          </li>
        </ul>
      </div>
      <div class="fo-col-md-4 fo-footer-column">
        <ul class="fo-nav fo-flex-column">
          <li class="fo-nav-item">
            <span class="fo-footer-title">Company</span>
          </li>
          <li class="fo-nav-item">
            <a class="fo-nav-link" href="#">About us</a>
          </li>
          <li class="fo-nav-item">
            <a class="fo-nav-link" href="#">Job postings</a>
          </li>
          <li class="fo-nav-item">
            <a class="fo-nav-link" href="#">News and articles</a>
          </li>
        </ul>
      </div>
      <div class="fo-col-md-4 fo-footer-column">
        <ul class="fo-nav fo-flex-column">
          <li class="fo-nav-item">
            <span class="fo-footer-title">Contact & Support</span>
          </li>
          <li class="fo-nav-item">
            <span class="fo-nav-link"><i class="fas fa-phone"></i> +47 45 80 80 80</span>
          </li>
          <li class="fo-nav-item">
            <a class="fo-nav-link" href="#"><i class="fas fa-comments"></i> Live chat</a>
          </li>
          <li class="fo-nav-item">
            <a class="fo-nav-link" href="#"><i class="fas fa-envelope"></i> Contact us</a>
          </li>
          <li class="fo-nav-item">
            <a class="fo-nav-link" href="#"><i class="fas fa-star"></i> Give feedback</a>
          </li>
        </ul>
      </div>
    </div>

    <div class="fo-text-center"><i class="fas fa-ellipsis-h"></i></div>

    <div class="fo-row fo-text-center">
      <div class="fo-col-md-4 fo-box">
        <span class="fo-copyright fo-quick-links">Copyright &copy; Your Website <script>document.write(new Date().getFullYear())</script></span>
      </div>
      <div class="fo-col-md-4 fo-box">
        <ul class="fo-list-inline fo-social-buttons">
          <li class="fo-list-inline-item">
            <a href="#"><i class="fab fa-twitter"></i></a>
          </li>
          <li class="fo-list-inline-item">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
          </li>
          <li class="fo-list-inline-item">
            <a href="#"><i class="fab fa-linkedin-in"></i></a>
          </li>
        </ul>
      </div>
      <div class="fo-col-md-4 fo-box">
        <ul class="fo-list-inline fo-quick-links">
          <li class="fo-list-inline-item">
            <a href="#">Privacy Policy</a>
          </li>
          <li class="fo-list-inline-item">
            <a href="#">Terms of Use</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</footer>





<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://kit.fontawesome.com/a076d05399.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        function openWishlist() {
            fetch("{% url 'wishlist' %}")
                .then(response => response.text())
                .then(data => {
                    document.getElementById("wishlist-container").innerHTML = data;
                    document.getElementById("wishlistModal").style.display = "block";
                    document.body.style.overflow = 'hidden';
                });
        }

        function closeWishlist() {
            document.getElementById("wishlistModal").style.display = "none";
            document.body.style.overflow = 'auto';
        }

        window.onclick = function (event) {
            if (event.target == document.getElementById("wishlistModal")) {
                closeWishlist();
            }
        }

        window.openWishlist = openWishlist;
        window.closeWishlist = closeWishlist;

            const statItems = document.querySelectorAll(".stat-item");

                statItems.forEach(item => {
                    const percentage = item.querySelector(".percentage").textContent;
                    const progress = item.querySelector(".progress");
                    progress.style.width = percentage;

                    // Add animation on scroll
                    const observer = new IntersectionObserver(entries => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                entry.target.classList.add("animate");
                            }
                        });
                    }, {
                        threshold: 0.5
                    });

                    observer.observe(item);
                });

        const searchButton = document.getElementById('searchQuerySubmit');
        searchButton.addEventListener('click', function (event) {
            event.preventDefault();
            const query = document.getElementById('searchQueryInput').value.toLowerCase();
            if (query) {
                const elements = document.querySelectorAll('section, footer, nav, header, main');
                let found = false;
                elements.forEach(element => {
                    if (element.innerText.toLowerCase().includes(query)) {
                        element.scrollIntoView({behavior: 'smooth'});
                        found = true;
                    }
                });
                if (!found) {
                    alert('No matching sections found');
                }
            }
        });


        const wishlistButtons = document.querySelectorAll('.wishlist-button');
        wishlistButtons.forEach(button => {
            button.addEventListener('click', function(event) {
                event.preventDefault();
                const productId = button.getAttribute('data-product-id');
                addToWishlist(productId);
            });
        });


        function addToWishlist(productId) {
        fetch(`/add-to-wishlist/${productId}/`)
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Product added to wishlist!');
                } else {
                    alert('Failed to add product to wishlist.');
                }
            })
            .catch(error => console.error('Error:', error));
    }

            window.addToWishlist = addToWishlist;

        });
</script>
</body>
</html>
